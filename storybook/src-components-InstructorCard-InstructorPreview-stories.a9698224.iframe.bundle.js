"use strict";(self.webpackChunkproject_connection=self.webpackChunkproject_connection||[]).push([[3193],{"./src/components/InstructorCard/InstructorPreview.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return InstructorPreview_stories}});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),Carousel=__webpack_require__("./src/components/Carousel/Carousel.tsx"),__jsx=react.createElement,ImagesViewer=function ImagesViewer(_ref){var imgURL=_ref.imgURL,focus=_ref.focus;return __jsx("figure",{className:"h-full w-full"},__jsx(Carousel.Z,{imgURL:imgURL,move:focus,arrow:imgURL.length>1&&focus,showCurrentElement:focus}))};ImagesViewer.displayName="ImagesViewer";var InstructorCard_ImagesViewer=ImagesViewer,svg=__webpack_require__("./public/icons/svg.ts"),Like=__webpack_require__("./src/components/Like/Like.tsx"),Review=__webpack_require__("./src/components/Review/Review.tsx"),InstructorCard_jsx=react.createElement,InstructorCard=function InstructorCard(_ref){var id=_ref.id,name=_ref.name,address=_ref.address,genres=_ref.genres,imgURL=_ref.imgURL,average=_ref.average,teamAffiliation=_ref.teamAffiliation,href=_ref.href,largeImg=_ref.largeImg,isLiked=_ref.isLiked,likeEvent=_ref.likeEvent,_useState=(0,react.useState)(!1),focus=_useState[0],setFocus=_useState[1],genresWithSpace=genres.reduce((function(acc,genre){return acc+" ".concat(genre)}),""),genresWithSlash=genres.reduce((function(acc,genre,index){return acc+(index!==genres.length-1?"/".concat(genre):genre)}));return InstructorCard_jsx("div",{onMouseOver:function onFocus(){setFocus(!0)},onMouseLeave:function offFocus(){setFocus(!1)},className:"relative h-full w-full overflow-hidden rounded-md shadow-horizontal"},InstructorCard_jsx("figcaption",{className:"pointer-events-none absolute z-10 hidden h-10 w-full items-center justify-center xl:flex ".concat(focus?"bg-black":"bg-white")},InstructorCard_jsx("h1",{className:"text-lg font-bold ".concat(focus&&"text-zinc-50")},name)),InstructorCard_jsx("div",{className:"pointer-events-auto absolute right-1 top-1 z-10"},InstructorCard_jsx(Like.Z,{id:id,type:"instructor",isLiked:isLiked,likeEvent:likeEvent})),InstructorCard_jsx(link_default(),{href:href},InstructorCard_jsx(InstructorCard_ImagesViewer,{imgURL:imgURL,focus:focus})),!focus&&InstructorCard_jsx(react.Fragment,null,InstructorCard_jsx("div",{className:"absolute bottom-24 flex w-full justify-center xl:bottom-[5rem]"},imgURL.map((function(img,index){return InstructorCard_jsx("span",{key:img+index,className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full ".concat(0===index?"bg-white":"bg-neutral-500")})}))),InstructorCard_jsx("figcaption",{className:"".concat(largeImg?"bg-white/[.9]":"bg-white sm:bg-white/[.8]"," pointer-events-none absolute bottom-0 z-10 flex h-[5.3125rem] w-full flex-col justify-center px-2 xl:h-[4.625rem] xl:items-center")},InstructorCard_jsx("div",{className:"hidden pb-2 pt-1 xl:block"},InstructorCard_jsx(Review.Z,{average:average})),InstructorCard_jsx("div",{className:"flex w-full items-center justify-between pb-1 xl:hidden"},InstructorCard_jsx("p",{className:"text-lg font-semibold"},name),InstructorCard_jsx("div",{className:"flex items-center gap-1"},InstructorCard_jsx(svg.dW,{width:16,height:15,className:"fill-sub-color1"}),InstructorCard_jsx("p",{className:"pb-0.5"},average))),InstructorCard_jsx("div",{className:"".concat(largeImg?"text-sm":"text-xs text-gray-500 sm:text-sm sm:text-black"," mb-0.5 flex gap-x-2 xl:grid xl:grid-cols-2")},InstructorCard_jsx("h2",{className:"whitespace-nowrap text-right"},address[0]+(address.length>1?" 외 ".concat(address.length-1," |"):"")),InstructorCard_jsx("h2",{className:"flex-grow truncate"},teamAffiliation)),InstructorCard_jsx("div",{className:"".concat(largeImg?"gap-2 text-sm":"text-xs text-gray-500 sm:gap-2 sm:text-sm sm:text-black"," xl:mx-auto xl:w-fit")},InstructorCard_jsx("p",{className:"".concat(!largeImg&&"hidden"," truncate sm:block")},genresWithSpace),InstructorCard_jsx("p",{className:"".concat(largeImg?"hidden":"block"," truncate sm:hidden")},genresWithSlash)))))};InstructorCard.displayName="InstructorCard";var InstructorCard_InstructorCard=InstructorCard,InstructorPreview_stories_jsx=react.createElement,InstructorPreview_stories={title:"Components/InstructorPreview",component:InstructorCard_InstructorCard,tags:["autodocs"],parameters:{docs:{description:{component:"강사에 대한 정보 미리보기 컴포넌트"}}},argTypes:{id:{description:"강사 ID",control:"number",table:{type:{summary:"number"}}},imgURL:{description:"표시할 이미지들의 URL들이 담긴 배열",control:"object",table:{type:{summary:"string[]"}}},name:{description:"강사 이름",control:"text",table:{type:{summary:"string"}}},address:{description:"강의 지역",control:"object",table:{type:{summary:"string[]"}}},teamAffiliation:{description:"강사 소속",control:"text",table:{type:{summary:"string"}}},genres:{description:"댄스 장르",control:"object",table:{type:{summary:"string[]"}}},average:{description:"강사 평점",control:"number",table:{type:{summary:"number"}}},href:{description:"해당 카드 이동경로",control:"text",table:{type:{summary:"string"}}},largeImg:{description:"큰 이미지로 보기",control:"boolean",table:{type:{summary:"boolean"}}},isLiked:{description:"좋아요 여부",control:"boolean",table:{type:{summary:"boolean"}}},likeEvent:{description:"좋아요 눌렀을 때 실행 함수",table:{type:{summary:"(id: string | number) => void"}}}},args:{id:0,imgURL:["https://img.freepik.com/free-photo/pretty-woman-practising-hip-hop-dance_107420-85008.jpg?size=626&ext=jpg","https://img.freepik.com/free-photo/girl-dancing-hip-hop-in-stylish-clothes-on-gradient-background-at-dance-hall-in-neon-light_155003-9249.jpg?size=626&ext=jpg","https://img.freepik.com/free-photo/dance-time-stylish-men-and-woman-dancing-hip-hop-in-bright-clothes-on-green-background-at-dance-hall-in-neon-light_155003-16406.jpg?size=626&ext=jpg","https://img.freepik.com/free-photo/two-beautiful-slender-girls-doing-dancing-and-gymnastics-in-the-dance-hall_1157-13817.jpg?size=626&ext=jpg","https://img.freepik.com/free-photo/boy-dancing-hip-hop-in-stylish-clothes-on-gradient-background-at-dance-hall-in-neon-light_155003-9262.jpg?size=626&ext=jpg"],name:"이바다",address:["서울 마포구"],teamAffiliation:"원밀리언즈",genres:["방송댄스","힙합","탱고"],average:3,href:"/",largeImg:!1,isLiked:!1,likeEvent:function likeEvent(){}}},Default={render:function render(args){return InstructorPreview_stories_jsx("div",{className:"h-60 w-80"},InstructorPreview_stories_jsx(InstructorCard_InstructorCard,args))}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: args => <div className="h-60 w-80">\n      <InstructorCard {...args} />\n    </div>\n}',...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./src/components/Carousel/Carousel.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),next_image__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_public_icons_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./public/icons/svg.ts"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;__webpack_exports__.Z=function Carousel(_ref){var imgURL=_ref.imgURL,move=_ref.move,_ref$arrow=_ref.arrow,arrow=void 0===_ref$arrow||_ref$arrow,_ref$priority=_ref.priority,priority=void 0===_ref$priority?1:_ref$priority,_ref$showCurrentEleme=_ref.showCurrentElement,showCurrentElement=void 0===_ref$showCurrentEleme||_ref$showCurrentEleme,_ref$gap=_ref.gap,gap=void 0===_ref$gap?0:_ref$gap,children=_ref.children,_ref$showCurrentEleme2=_ref.showCurrentElementBackGround,showCurrentElementBackGround=void 0===_ref$showCurrentEleme2||_ref$showCurrentEleme2,_ref$carouselMoveInte=_ref.carouselMoveIntervalTime,carouselMoveIntervalTime=void 0===_ref$carouselMoveInte?2e3:_ref$carouselMoveInte,_ref$arrowPushMoveWai=_ref.arrowPushMoveWaitTime,arrowPushMoveWaitTime=void 0===_ref$arrowPushMoveWai?2e3:_ref$arrowPushMoveWai,_ref$movePause=_ref.movePause,movePause=void 0!==_ref$movePause&&_ref$movePause,childrenArray=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children),extendForCarousel=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(elementArr){if(elementArr.length>1){var newElementArr=[].concat((0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(elementArr),[elementArr[0]]);return newElementArr.shift(),[newElementArr.at(-1)].concat((0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(newElementArr),(0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(newElementArr.slice(0,priority-1)))}return(0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(elementArr)}),[priority]),carouselElements=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return extendForCarousel(children?(0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(childrenArray):(0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(imgURL||[]))}),[childrenArray,imgURL]),carouselLength=carouselElements.length,originalElements=children?childrenArray:(0,_home_runner_work_frontend_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(imgURL||[]),_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),currentIndex=_useState[0],setCurrentIndex=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(priority>1?priority:1),loadedElementCount=_useState2[0],setLoadedElementCount=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),isAnimating=_useState3[0],setIsAnimating=_useState3[1],intervalIdRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),timeoutIdRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);move&&loadedElementCount<carouselLength&&setLoadedElementCount(carouselLength);var updateImageIndex=function updateImageIndex(){setCurrentIndex((function(prev){return prev===carouselLength-priority?(setIsAnimating(!1),0):0===prev?(setIsAnimating(!0),prev+1):prev+1}))};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return movePause&&intervalIdRef.current?clearInterval(intervalIdRef.current):move&&carouselLength>1?(setIsAnimating(!0),1===priority&&(timeoutIdRef.current=setTimeout((function(){return updateImageIndex()}),100)),intervalIdRef.current=setInterval(updateImageIndex,carouselMoveIntervalTime)):(setIsAnimating(!1),setCurrentIndex(0),setTimeout((function(){return setIsAnimating(!0)}),100),intervalIdRef.current&&clearInterval(intervalIdRef.current)),function(){intervalIdRef.current&&clearInterval(intervalIdRef.current),timeoutIdRef.current&&clearTimeout(timeoutIdRef.current)}}),[move,loadedElementCount,movePause]);var changeImage=function changeImage(event,direction){intervalIdRef.current&&clearInterval(intervalIdRef.current),timeoutIdRef.current&&clearTimeout(timeoutIdRef.current),event.stopPropagation(),event.nativeEvent.preventDefault(),setIsAnimating(!1),setCurrentIndex((function(prev){return"FORWARD"===direction?prev>=carouselLength-priority?0:prev+1:prev<=0?carouselLength-priority:prev-1})),timeoutIdRef.current=setTimeout((function(){setIsAnimating(!0),intervalIdRef.current=setInterval(updateImageIndex,carouselMoveIntervalTime)}),arrowPushMoveWaitTime)};return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("ul",{className:"flex h-full ".concat(isAnimating&&"transition-transform duration-[1600ms] ease-out"),style:{transform:"translateX(calc(-".concat(100*currentIndex,"% - ").concat(gap*currentIndex,"rem)")}},carouselElements.slice(0,loadedElementCount).map((function(element,index){return __jsx("li",{key:index,className:"relative h-full w-full flex-shrink-0 ",style:{marginRight:"".concat(gap,"rem")}},children?element:"string"==typeof element&&__jsx(next_image__WEBPACK_IMPORTED_MODULE_1__.Z,{src:element,alt:"Connection 댄스 춤 이미지",fill:!0,sizes:"(max-width: 720px) 60vw, (max-width: 1440px) 30vw",priority:index<priority,style:{objectFit:"cover"}}))}))),showCurrentElement&&__jsx("div",{className:"absolute bottom-0 flex h-[10%] w-full items-center justify-center ".concat(showCurrentElementBackGround&&"bg-black/[.5]"," ")},originalElements.map((function(_,index){return __jsx("span",{key:index,className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full ".concat(0===index||currentIndex<originalElements.length&&index<=currentIndex?"bg-white":"bg-neutral-500")})}))),arrow&&carouselLength>1&&__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx(_public_icons_svg__WEBPACK_IMPORTED_MODULE_2__.Eh,{onClick:function onClick(e){return changeImage(e,"BACKWARD")},className:"absolute left-3 top-1/2 hidden -translate-y-1/2 -scale-x-100 transform cursor-pointer sm:block"}),__jsx(_public_icons_svg__WEBPACK_IMPORTED_MODULE_2__.Eh,{onClick:function onClick(e){return changeImage(e,"FORWARD")},className:"absolute right-3 top-1/2 hidden -translate-y-1/2 transform cursor-pointer sm:block"})))}},"./src/components/Like/Like.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return Like_Like}});var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),react_toastify_esm=__webpack_require__("./node_modules/react-toastify/dist/react-toastify.esm.mjs"),svg=__webpack_require__("./public/icons/svg.ts"),classApis=__webpack_require__("./src/lib/apis/classApis.ts"),instructorLikesBlockApis=__webpack_require__("./src/lib/apis/instructorLikesBlockApis.ts"),userApi=__webpack_require__("./src/lib/apis/userApi.ts"),userStore=__webpack_require__("./src/store/userStore.ts"),__jsx=react.createElement,Spinner=function Spinner(_ref){var _ref$size=_ref.size,size=void 0===_ref$size?80:_ref$size;return __jsx("div",{className:"spinner"},__jsx(svg.WV,{width:size,height:size}))};Spinner.displayName="Spinner";var Loading_Spinner=Spinner,console=__webpack_require__("./node_modules/console-browserify/index.js"),Like_jsx=react.createElement,Like_Like=function Like(_ref){var id=_ref.id,type=_ref.type,isLiked=_ref.isLiked,likeEvent=_ref.likeEvent,_useUserStore=(0,userStore.L)((function(state){return{likeClassList:state.likeClassList,setLikeClassList:state.setLikeClassList,likeInstructorList:state.likeInstructorList,setLikeInstructorList:state.setLikeInstructorList}})),likeClassList=_useUserStore.likeClassList,likeInstructorList=_useUserStore.likeInstructorList,setLikeClassList=_useUserStore.setLikeClassList,setLikeInstructorList=_useUserStore.setLikeInstructorList,_useState=(0,react.useState)(!1),loading=_useState[0],setLoading=_useState[1],_useState2=(0,react.useState)(isLiked),liked=_useState2[0],setLiked=_useState2[1],style=liked?"fill-main-color stroke-main-color":"hover:fill-main-color hover:stroke-main-color stroke-gray-500 stroke-2";(0,react.useEffect)((function(){"class"===type?setLiked(likeClassList.includes(Number(id))):"instructor"===type&&setLiked(likeInstructorList.includes(Number(id)))}),[likeClassList,likeInstructorList]);var handleLike=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee6(event){var retryFunc;return regenerator_default().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(event.stopPropagation(),retryFunc=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),_callee)})));return function retryFunc(){return _ref3.apply(this,arguments)}}(),_context6.prev=2,"class"!==type){_context6.next=12;break}return retryFunc=liked?(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,classApis.id)(String(id));case 2:setLikeClassList(likeClassList.filter((function(classId){return Number(id)!==classId})));case 3:case"end":return _context2.stop()}}),_callee2)}))):(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(){return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,classApis.ST)(String(id));case 2:setLikeClassList([].concat((0,toConsumableArray.Z)(likeClassList),[Number(id)]));case 3:case"end":return _context3.stop()}}),_callee3)}))),setLoading(!0),_context6.next=8,retryFunc();case 8:setLiked(!liked),setLoading(!1),_context6.next=18;break;case 12:return retryFunc=liked?(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(){return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,instructorLikesBlockApis.u1)(id);case 2:likeEvent&&likeEvent(id),setLikeInstructorList(likeInstructorList.filter((function(classId){return Number(id)!==classId})));case 4:case"end":return _context4.stop()}}),_callee4)}))):(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee5(){return regenerator_default().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,(0,instructorLikesBlockApis.DR)(id);case 2:setLikeInstructorList([].concat((0,toConsumableArray.Z)(likeInstructorList),[Number(id)]));case 3:case"end":return _context5.stop()}}),_callee5)}))),setLoading(!0),_context6.next=16,retryFunc();case 16:setLiked(!liked),setLoading(!1);case 18:_context6.next=40;break;case 20:if(_context6.prev=20,_context6.t0=_context6.catch(2),!(_context6.t0 instanceof Error)){_context6.next=40;break}if(401!==_context6.t0.status){_context6.next=39;break}return _context6.prev=25,_context6.next=28,(0,userApi.Yc)();case 28:if(!retryFunc){_context6.next=31;break}return _context6.next=31,retryFunc();case 31:setLiked(!liked),_context6.next=37;break;case 34:_context6.prev=34,_context6.t1=_context6.catch(25),console.error(_context6.t1);case 37:_context6.next=40;break;case 39:react_toastify_esm.Am.error("잘못된 요청입니다!");case 40:case"end":return _context6.stop()}}),_callee6,null,[[2,20],[25,34]])})));return function handleLike(_x){return _ref2.apply(this,arguments)}}();return loading?Like_jsx(Loading_Spinner,{size:30}):Like_jsx("button",{onClick:handleLike,"aria-label":"좋아요"},Like_jsx(svg.qK,{width:"29",height:"30",className:style}))}}}]);