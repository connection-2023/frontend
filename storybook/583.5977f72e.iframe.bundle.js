"use strict";(self.webpackChunkproject_connection=self.webpackChunkproject_connection||[]).push([[583],{"./src/components/Carousel/Carousel.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),next_image__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_public_icons_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./public/icons/svg.ts"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;__webpack_exports__.Z=function Carousel(_ref){var imgURL=_ref.imgURL,move=_ref.move,_ref$arrow=_ref.arrow,arrow=void 0===_ref$arrow||_ref$arrow,_ref$priority=_ref.priority,priority=void 0===_ref$priority?1:_ref$priority,_ref$showCurrentEleme=_ref.showCurrentElement,showCurrentElement=void 0===_ref$showCurrentEleme||_ref$showCurrentEleme,_ref$gap=_ref.gap,gap=void 0===_ref$gap?0:_ref$gap,children=_ref.children,_ref$showCurrentEleme2=_ref.showCurrentElementBackGround,showCurrentElementBackGround=void 0===_ref$showCurrentEleme2||_ref$showCurrentEleme2,_ref$carouselMoveInte=_ref.carouselMoveIntervalTime,carouselMoveIntervalTime=void 0===_ref$carouselMoveInte?2e3:_ref$carouselMoveInte,_ref$arrowPushMoveWai=_ref.arrowPushMoveWaitTime,arrowPushMoveWaitTime=void 0===_ref$arrowPushMoveWai?2e3:_ref$arrowPushMoveWai,_ref$movePause=_ref.movePause,movePause=void 0!==_ref$movePause&&_ref$movePause,childrenArray=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children),extendForCarousel=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(elementArr){if(elementArr.length>1){var newElementArr=[].concat((0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(elementArr),[elementArr[0]]);return newElementArr.shift(),[newElementArr.at(-1)].concat((0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(newElementArr),(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(newElementArr.slice(0,priority-1)))}return(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(elementArr)}),[priority]),carouselElements=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return extendForCarousel(children?(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(childrenArray):(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(imgURL||[]))}),[childrenArray,imgURL]),carouselLength=carouselElements.length,originalElements=children?childrenArray:(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(imgURL||[]),_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),currentIndex=_useState[0],setCurrentIndex=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(priority>1?priority:1),loadedElementCount=_useState2[0],setLoadedElementCount=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),isAnimating=_useState3[0],setIsAnimating=_useState3[1],intervalIdRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),timeoutIdRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);move&&loadedElementCount<carouselLength&&setLoadedElementCount(carouselLength);var updateImageIndex=function updateImageIndex(){setCurrentIndex((function(prev){return prev===carouselLength-priority?(setIsAnimating(!1),0):0===prev?(setIsAnimating(!0),prev+1):prev+1}))};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return movePause&&intervalIdRef.current?clearInterval(intervalIdRef.current):move&&carouselLength>1?(setIsAnimating(!0),1===priority&&(timeoutIdRef.current=setTimeout((function(){return updateImageIndex()}),100)),intervalIdRef.current=setInterval(updateImageIndex,carouselMoveIntervalTime)):(setIsAnimating(!1),setCurrentIndex(0),setTimeout((function(){return setIsAnimating(!0)}),100),intervalIdRef.current&&clearInterval(intervalIdRef.current)),function(){intervalIdRef.current&&clearInterval(intervalIdRef.current),timeoutIdRef.current&&clearTimeout(timeoutIdRef.current)}}),[move,loadedElementCount,movePause]);var changeImage=function changeImage(event,direction){intervalIdRef.current&&clearInterval(intervalIdRef.current),timeoutIdRef.current&&clearTimeout(timeoutIdRef.current),event.stopPropagation(),event.nativeEvent.preventDefault(),setIsAnimating(!1),setCurrentIndex((function(prev){return"FORWARD"===direction?prev>=carouselLength-priority?0:prev+1:prev<=0?carouselLength-priority:prev-1})),timeoutIdRef.current=setTimeout((function(){setIsAnimating(!0),intervalIdRef.current=setInterval(updateImageIndex,carouselMoveIntervalTime)}),arrowPushMoveWaitTime)};return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("div",{className:"flex h-full ".concat(isAnimating&&"transition-transform duration-[1600ms] ease-out"),style:{transform:"translateX(calc(-".concat(100*currentIndex,"% - ").concat(gap*currentIndex,"rem)")}},carouselElements.slice(0,loadedElementCount).map((function(element,index){return __jsx("picture",{key:index,className:"relative h-full w-full flex-shrink-0 ",style:{marginRight:"".concat(gap,"rem")}},children?element:"string"==typeof element&&__jsx(next_image__WEBPACK_IMPORTED_MODULE_1__.Z,{src:element,alt:"Connection 댄스 춤 이미지",fill:!0,sizes:"(max-width: 720px) 60vw, (max-width: 1440px) 30vw",priority:index<priority,style:{objectFit:"cover"}}))}))),showCurrentElement&&__jsx("div",{className:"absolute bottom-0 flex h-[10%] w-full items-center justify-center ".concat(showCurrentElementBackGround&&"bg-black/[.5]"," ")},originalElements.map((function(_,index){return __jsx("span",{key:index,className:"mr-1.5 inline-block h-1.5 w-1.5 rounded-full ".concat(0===index||currentIndex<originalElements.length&&index<=currentIndex?"bg-white":"bg-neutral-500")})}))),arrow&&carouselLength>1&&__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx(_public_icons_svg__WEBPACK_IMPORTED_MODULE_2__.Eh,{onClick:function onClick(e){return changeImage(e,"BACKWARD")},className:"absolute left-3 top-1/2 hidden -translate-y-1/2 -scale-x-100 transform cursor-pointer sm:block"}),__jsx(_public_icons_svg__WEBPACK_IMPORTED_MODULE_2__.Eh,{onClick:function onClick(e){return changeImage(e,"FORWARD")},className:"absolute right-3 top-1/2 hidden -translate-y-1/2 transform cursor-pointer sm:block"})))}},"./src/components/Like/Like.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return Like_Like}});var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),react_toastify_esm=__webpack_require__("./node_modules/react-toastify/dist/react-toastify.esm.mjs"),svg=__webpack_require__("./public/icons/svg.ts"),classApis=__webpack_require__("./src/lib/apis/classApis.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js"),instructorsLikeCancel=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(lectureId){var response,errorData,error,data;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,fetch("/api/users/instructors/like-cancel?lectureId=".concat(encodeURIComponent(lectureId)),{method:"DELETE",credentials:"include"});case 3:if((response=_context2.sent).ok){_context2.next=11;break}return _context2.next=7,response.json();case 7:throw errorData=_context2.sent,(error=new Error(errorData.message||"")).status=response.status,error;case 11:return _context2.next=13,response.json();case 13:return data=_context2.sent,_context2.abrupt("return",data);case 17:throw _context2.prev=17,_context2.t0=_context2.catch(0),console.error("강사좋아요 취소 오류",_context2.t0),_context2.t0;case 21:case"end":return _context2.stop()}}),_callee2,null,[[0,17]])})));return function instructorsLikeCancel(_x2){return _ref2.apply(this,arguments)}}(),instructorsLikes=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(lectureId){var response,errorData,error,data;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,fetch("/api/users/instructors/likes?lectureId=".concat(encodeURIComponent(lectureId)),{method:"POST",credentials:"include"});case 3:if((response=_context3.sent).ok){_context3.next=11;break}return _context3.next=7,response.json();case 7:throw errorData=_context3.sent,(error=new Error(errorData.message||"")).status=response.status,error;case 11:return _context3.next=13,response.json();case 13:return data=_context3.sent,_context3.abrupt("return",data);case 17:throw _context3.prev=17,_context3.t0=_context3.catch(0),console.error("강사 좋아요 오류",_context3.t0),_context3.t0;case 21:case"end":return _context3.stop()}}),_callee3,null,[[0,17]])})));return function instructorsLikes(_x3){return _ref3.apply(this,arguments)}}(),userApi_console=__webpack_require__("./node_modules/console-browserify/index.js"),accessTokenReissuance=function(){var _ref8=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee8(){var response;return regenerator_default().wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.prev=0,_context8.next=3,fetch("/api/auth/refresh",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"manual"});case 3:return"opaqueredirect"===(response=_context8.sent).type&&(window.location.href=response.url),_context8.abrupt("return",response);case 8:throw _context8.prev=8,_context8.t0=_context8.catch(0),userApi_console.error("엑세스 토큰 재발급 오류",_context8.t0),_context8.t0;case 12:case"end":return _context8.stop()}}),_callee8,null,[[0,8]])})));return function accessTokenReissuance(){return _ref8.apply(this,arguments)}}(),userStore=__webpack_require__("./src/store/userStore.ts"),__jsx=react.createElement,Spinner=function Spinner(_ref){var _ref$size=_ref.size,size=void 0===_ref$size?80:_ref$size;return __jsx("div",{className:"spinner"},__jsx(svg.WV,{width:size,height:size}))};Spinner.displayName="Spinner";var Loading_Spinner=Spinner,Like_console=__webpack_require__("./node_modules/console-browserify/index.js"),Like_jsx=react.createElement,Like_Like=function Like(_ref){var id=_ref.id,type=_ref.type,isLiked=_ref.isLiked,likeEvent=_ref.likeEvent,_useUserStore=(0,userStore.L)((function(state){return{likeClassList:state.likeClassList,setLikeClassList:state.setLikeClassList,likeInstructorList:state.likeInstructorList,setLikeInstructorList:state.setLikeInstructorList}})),likeClassList=_useUserStore.likeClassList,likeInstructorList=_useUserStore.likeInstructorList,setLikeClassList=_useUserStore.setLikeClassList,setLikeInstructorList=_useUserStore.setLikeInstructorList,_useState=(0,react.useState)(!1),loading=_useState[0],setLoading=_useState[1],_useState2=(0,react.useState)(isLiked),liked=_useState2[0],setLiked=_useState2[1],style=liked?"fill-main-color stroke-main-color":"hover:fill-main-color hover:stroke-main-color";(0,react.useEffect)((function(){"class"===type?setLiked(likeClassList.includes(Number(id))):"instructor"===type&&setLiked(likeInstructorList.includes(Number(id)))}),[likeClassList,likeInstructorList]);var handleLike=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee6(){var retryFunc;return regenerator_default().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(retryFunc=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),_callee)})));return function retryFunc(){return _ref3.apply(this,arguments)}}(),_context6.prev=1,"class"!==type){_context6.next=11;break}return retryFunc=liked?(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,classApis.id)(String(id));case 2:setLikeClassList(likeClassList.filter((function(classId){return Number(id)!==classId})));case 3:case"end":return _context2.stop()}}),_callee2)}))):(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(){return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,classApis.ST)(String(id));case 2:setLikeClassList([].concat((0,toConsumableArray.Z)(likeClassList),[Number(id)]));case 3:case"end":return _context3.stop()}}),_callee3)}))),setLoading(!0),_context6.next=7,retryFunc();case 7:setLiked(!liked),setLoading(!1),_context6.next=17;break;case 11:return retryFunc=liked?(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(){return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,instructorsLikeCancel(id);case 2:likeEvent&&likeEvent(id),setLikeInstructorList(likeInstructorList.filter((function(classId){return Number(id)!==classId})));case 4:case"end":return _context4.stop()}}),_callee4)}))):(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee5(){return regenerator_default().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,instructorsLikes(id);case 2:setLikeInstructorList([].concat((0,toConsumableArray.Z)(likeInstructorList),[Number(id)]));case 3:case"end":return _context5.stop()}}),_callee5)}))),setLoading(!0),_context6.next=15,retryFunc();case 15:setLiked(!liked),setLoading(!1);case 17:_context6.next=39;break;case 19:if(_context6.prev=19,_context6.t0=_context6.catch(1),!(_context6.t0 instanceof Error)){_context6.next=39;break}if(401!==_context6.t0.status){_context6.next=38;break}return _context6.prev=24,_context6.next=27,accessTokenReissuance();case 27:if(!retryFunc){_context6.next=30;break}return _context6.next=30,retryFunc();case 30:setLiked(!liked),_context6.next=36;break;case 33:_context6.prev=33,_context6.t1=_context6.catch(24),Like_console.error(_context6.t1);case 36:_context6.next=39;break;case 38:react_toastify_esm.Am.error("잘못된 요청입니다!");case 39:case"end":return _context6.stop()}}),_callee6,null,[[1,19],[24,33]])})));return function handleLike(){return _ref2.apply(this,arguments)}}();return loading?Like_jsx(Loading_Spinner,{size:30}):Like_jsx("button",{onClick:handleLike,"aria-label":"좋아요"},Like_jsx(svg.qK,{width:"29",height:"30",className:style}))}},"./src/store/userStore.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{L:function(){return useUserStore}});var _home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var useUserStore=(0,__webpack_require__("./node_modules/zustand/esm/index.mjs").Ue)((function(set,get){return{authUser:null,userType:null,requestLoading:!1,likeClassList:[],likeInstructorList:[],setUserType:function setUserType(type){return set((function(state){return _objectSpread(_objectSpread({},state),{},{userType:type})}))},setAuthUser:function setAuthUser(user){return set((function(state){return _objectSpread(_objectSpread({},state),{},{authUser:user})}))},setAuthUserImage:function setAuthUserImage(imageUrl){var currentUser=get().authUser;if(currentUser){var updatedUser=_objectSpread(_objectSpread({},currentUser),{},{userProfileImage:{imageUrl:imageUrl}});set({authUser:updatedUser})}},setRequestLoading:function setRequestLoading(isLoading){return set((function(state){return _objectSpread(_objectSpread({},state),{},{requestLoading:isLoading})}))},reset:function reset(){return set({authUser:null,requestLoading:!1})},setLikeClassList:function setLikeClassList(list){return set({likeClassList:(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(list)})},setLikeInstructorList:function setLikeInstructorList(list){return set({likeInstructorList:(0,_home_runner_work_connection_frontend_connection_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(list)})}}}))}}]);